machine:
  python:
    version: 2.7.12
dependencies:
  pre:
    # update locally with::
    # openssl aes-256-cbc -e -in secret-env-plain -out secret-env-cipher -k $KEY
    - openssl aes-256-cbc -d -in secret-env-cipher -k $KEY >> ~/circlecitest_awsconfig/configaws
compile:
  override:
     - echo 'hello world'
     - echo $ABC
     - |
        CDE=${ABC}
        echo $CDE
     - 'ls -l ~/'
     - 'aws --version'
    # - 'ls -l ~/.aws/'
deployment:
  branch: dev
  commands:
       - cat ~/circlecitest_awsconfig/configaws
       - |
          export AWS_CONFIG_FILE=~/circlecitest_awsconfig/configaws
          aws --debug s3 sync ~/circlecitest_awsconfig/dist s3://s3awscddev3 --delete --profile devprofile
test:
  override:
     - python nosetest.py
